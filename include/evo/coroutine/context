// -*- C++ -*-
// Date:   Mon May 05 15:25:19 2025
// Mail:   lunar_ubuntu@qq.com
// Author: https://github.com/xiaoqixian

#pragma once

#include <coroutine>
#include <deque>
#include "evo/coroutine/raw_task"
#include "evo/coroutine/utilities"

namespace evo::coro {

class Context {
  friend class RuntimeImpl;
  using task_t = RawTask;
  std::deque<task_t> tasks_;
public:
  template <typename T>
  inline void push(T&& task) {
    tasks_.emplace_back(std::forward<T>(task));
  }

  template <typename T>
  inline void push_front(T&& task) {
    tasks_.emplace_front(std::forward<T>(task));
  }
};

extern thread_local ThreadLocalWrapper<Context> GLOBAL_CONTEXT;

} // namespace evo::coro

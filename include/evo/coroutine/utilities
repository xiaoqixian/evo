// -*- C++ -*-
// Date:   Sun May 04 11:09:54 2025
// Mail:   lunar_ubuntu@qq.com
// Author: https://github.com/xiaoqixian

#pragma once

#include "evo/debug"

namespace evo::coro {

template <typename T>
class ThreadLocalWrapper {
  T* data_ {nullptr};
public:
  void set(T* data) {
    data_ = data;
  }

  void reset() {
    data_ = nullptr;
  }

  template <typename F>
  auto with(F&& f) -> decltype(f(*data_)) {
    DEBUG_ASSERT(data_, "");
    return f(*data_);
  }
};


} // namespace evo::coro

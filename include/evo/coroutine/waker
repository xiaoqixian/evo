// -*- C++ -*-
// Date:   Mon May 05 15:30:31 2025
// Mail:   lunar_ubuntu@qq.com
// Author: https://github.com/xiaoqixian

#pragma once

#include "evo/macros"
#include <coroutine>
#include <utility>
#include "evo/coroutine/scheduler"
#include "evo/coroutine/raw_task"

namespace evo::coro {

class Waker {
  RawTask task_;
  LocalScheduler scheduler_;
public:
  explicit Waker(void* task) noexcept: task_(static_cast<TaskScheme*>(task)) {}

  inline void wake() {
    scheduler_.schedule(task_);
  }
};

} // namespace evo::coro
